<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>linux命令实现</title>
    <link href="/2025/01/22/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/"/>
    <url>/2025/01/22/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="”linux命令实现”技术报告"><a href="#”linux命令实现”技术报告" class="headerlink" title="”linux命令实现”技术报告"></a>”linux命令实现”技术报告</h1><h2 id="主要逻辑"><a href="#主要逻辑" class="headerlink" title="主要逻辑"></a>主要逻辑</h2><p>​使用<code>fgets</code>函数读入用户输入的命令后，先使用<code>strtok</code>函数摘取单词，再用<code>strcmp</code>函数将其与四种命令对照，成功识别后载入对应的命令区块，经过缺失与冗余分析后调用命令函数，在命令函数中将命令重构并使用<code>system</code>函数将命令传至操作系统。</p><h2 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h2><p>​1.各处取词以及取词后存入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">char* token=strtok(command,&quot; &quot;);</span><br><span class="line"></span><br><span class="line">char* sourceFile=strtok(NULL,&quot; &quot;);</span><br><span class="line">char* targetFile=strtok(NULL,&quot; &quot;);</span><br><span class="line">char* extratoken=strtok(NULL,&quot; &quot;);</span><br><span class="line"></span><br><span class="line">char* fileName=strtok(NULL,&quot; &quot;);</span><br><span class="line">char* extratoken=strtok(NULL,&quot; &quot;);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>​2.字符串的对比</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(strcmp(token,&quot;cp&quot;) == 0)</span><br><span class="line">else if(strcmp(token,&quot;rm&quot;) == 0)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>​3.代码的重构</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">snprintf(cmd,sizeof(cmd),&quot;cp &#x27;%s&#x27; &#x27;%s&#x27;&quot;,sourceFile,targetFile);</span><br><span class="line">snprintf(cmd,sizeof(cmd),&quot;rm &#x27;%s&#x27;&quot;,fileName);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>​4.system</p><h2 id="困难与解决方法"><a href="#困难与解决方法" class="headerlink" title="困难与解决方法"></a>困难与解决方法</h2><h4 id="1-不清楚怎样对用户输入的命令进行鉴别。"><a href="#1-不清楚怎样对用户输入的命令进行鉴别。" class="headerlink" title="1.不清楚怎样对用户输入的命令进行鉴别。"></a>1.不清楚怎样对用户输入的命令进行鉴别。</h4><h4 id="解决：了解到使用strtok函数进行取词，使用strcmp将两字符串进行对比。"><a href="#解决：了解到使用strtok函数进行取词，使用strcmp将两字符串进行对比。" class="headerlink" title="解决：了解到使用strtok函数进行取词，使用strcmp将两字符串进行对比。"></a>解决：了解到使用<code>strtok</code>函数进行取词，使用<code>strcmp</code>将两字符串进行对比。</h4><h4 id="2-tar-xzf命令无法解析（原因：对strtok函数的额外调用导致了指针移动）"><a href="#2-tar-xzf命令无法解析（原因：对strtok函数的额外调用导致了指针移动）" class="headerlink" title="2.tar -xzf命令无法解析（原因：对strtok函数的额外调用导致了指针移动）"></a>2.tar -xzf命令无法解析（原因：对<code>strtok</code>函数的额外调用导致了指针移动）</h4><h4 id="解决：将取词存入标签中。"><a href="#解决：将取词存入标签中。" class="headerlink" title="解决：将取词存入标签中。"></a>解决：将取词存入标签中。</h4><h4 id="3-直接将用户输入的命令导入系统，容易引发安全隐患。"><a href="#3-直接将用户输入的命令导入系统，容易引发安全隐患。" class="headerlink" title="3. 直接将用户输入的命令导入系统，容易引发安全隐患。"></a>3. 直接将用户输入的命令导入系统，容易引发安全隐患。</h4><h4 id="解决：使用snprintf函数对用户输入的命令进行解析后重构，提高安全性。"><a href="#解决：使用snprintf函数对用户输入的命令进行解析后重构，提高安全性。" class="headerlink" title="解决：使用snprintf函数对用户输入的命令进行解析后重构，提高安全性。"></a>解决：使用<code>snprintf</code>函数对用户输入的命令进行解析后重构，提高安全性。</h4><h4 id="4-未处理用户输入的多于信息。"><a href="#4-未处理用户输入的多于信息。" class="headerlink" title="4.未处理用户输入的多于信息。"></a>4.未处理用户输入的多于信息。</h4><h4 id="解决：多进行一次strtok，增加if条件。"><a href="#解决：多进行一次strtok，增加if条件。" class="headerlink" title="解决：多进行一次strtok，增加if条件。"></a>解决：多进行一次<code>strtok</code>，增加if条件。</h4><h4 id="5-出现了rm-null的情况。"><a href="#5-出现了rm-null的情况。" class="headerlink" title="5.出现了rm null的情况。"></a>5.出现了<code>rm null</code>的情况。</h4><h4 id="解决：if括号里”-”写成”-”了"><a href="#解决：if括号里”-”写成”-”了" class="headerlink" title="解决：if括号里”&#x3D;&#x3D;”写成”&#x3D;”了."></a>解决：if括号里”&#x3D;&#x3D;”写成”&#x3D;”了.</h4><h2 id="运行截图"><a href="#运行截图" class="headerlink" title="运行截图"></a>运行截图</h2><h4 id="1-start"><a href="#1-start" class="headerlink" title="1.start"></a>1.start</h4><p><img src="/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/start.png"></p><h4 id="2-copy"><a href="#2-copy" class="headerlink" title="2.copy"></a>2.copy</h4><p><img src="/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/copy.png"></p><h4 id="3-delete"><a href="#3-delete" class="headerlink" title="3.delete"></a>3.delete</h4><p><img src="/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/rm.png"></p><h4 id="4-compress"><a href="#4-compress" class="headerlink" title="4.compress"></a>4.compress</h4><p><img src="/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/compress.png"></p><h4 id="5-decompress"><a href="#5-decompress" class="headerlink" title="5.decompress"></a>5.decompress</h4><p><img src="/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/decompress.png"></p><h4 id="6-exit"><a href="#6-exit" class="headerlink" title="6.exit"></a>6.exit</h4><p><img src="/linux%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0/exit.png"></p><h2 id="在本次训练营的收获"><a href="#在本次训练营的收获" class="headerlink" title="在本次训练营的收获"></a>在本次训练营的收获</h2><p>​对linux，vim，git，github还有博客等都有了一定的了解，还搭建了自己的博客，有很大的科创启蒙意义。</p>]]></content>
    
    
    
    <tags>
      
      <tag>c&amp;linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>常用的linux命令行命令</title>
    <link href="/2025/01/19/%E5%B8%B8%E7%94%A8%E7%9A%84linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%91%BD%E4%BB%A4/"/>
    <url>/2025/01/19/%E5%B8%B8%E7%94%A8%E7%9A%84linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="常用的linux命令行命令"><a href="#常用的linux命令行命令" class="headerlink" title="常用的linux命令行命令"></a>常用的linux命令行命令</h1><h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><p><code>ls</code>就是可以列出当前目录下有什么东西或目录，我们需要经常使用这个命令以查看文件变化来确保我们的命令无误，就特别类似使用<code>git status</code>。它会根据文件类别区分颜色，主要有浅蓝色目录、白色文件、红色压缩。</p><p>后面还可以加很多参数，最常见的就是：</p><ul><li><p><code>-a(</code>列出包括以.开头的隐含文件)</p></li><li><p><code>-l</code>(列出文件的详细信息包括创建时间以及权限等)</p></li><li><p><code>-R</code>(列出所有子目录下的文件)</p></li></ul><h2 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h2><p>这个也特别重要，它可以用来切换当前所在的目录。(以~&#x2F;a&#x2F;b&#x2F;c&#x2F;d为例，我们现在在c)</p><ul><li><p>对于当前目录下的子目录：我们可以直接使用相对路径，如<code>cd d</code>。</p></li><li><p>对于当前目录的上级目录：我们就需要使用绝对路径，如<code>cd ~/a/b</code>。不过上一级目录可以直接使用<code>cd ..</code>。</p></li></ul><p><strong>注意</strong>： <code>.</code>代表当前目录，<code>~</code>是<code>home</code>目录，<code>/</code>是根目录。使用<code>cd</code>即什么都不加直接跳转<code>home</code>目录。</p><h2 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h2><p>显示当前路径，没什么好说的。</p><h2 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h2><p>创建一个空白文档。</p><h2 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h2><p>创建一个空白目录，加<code>-p</code>参数还可以创建多级目录，好玩。</p><h2 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h2><p>读取文件内容(只建议小文件使用)，加参数<code>-n</code>还可以添加行号，vim中同样有此记载。</p><h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><p>向文件中载入内容，格式是<code>echo &quot;要载入的内容&quot; &gt; &lt;file&gt;</code>,这个命令每一次使用相当于删除原有的载入当前的，只适合小文件。</p><h2 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h2><p>直接加文件名。</p><ul><li><p><code>-r</code>参数删除目录。</p></li><li><p><code>-rf</code>参数强制删除。</p></li></ul><h2 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h2><p>复制文件，格式为 <code>cp 原文件路径 新文件路径(最后一项是新名)</code>,加<code>-r</code>参数可以对目录操作。</p><h2 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h2><p>移动，使用与<code>cp</code>类似。</p><h2 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h2><p>创建软链接，类似windows中的快捷方式，创建格式为<code>ln -s &lt;file-path&gt; &lt;link-name&gt;</code>，删除格式为<code>rm -rf &lt;link-name&gt;</code>。</p><h2 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h2><p>用于修改文件的权限，格式为<code>chmod &lt;用户类别&gt;&lt;操作符&gt;&lt;权限类型&gt; &lt;文件&gt;</code>，权限有符号和数字两种表达模式。</p><h4 id="一、符号模式："><a href="#一、符号模式：" class="headerlink" title="一、符号模式："></a>一、符号模式：</h4><ol><li><strong>用户类别</strong>：</li></ol><ul><li><p><code>u</code>：文件的拥有者（user）。</p></li><li><p><code>g</code>：文件的所属组（group）。</p></li><li><p><code>o</code>：其他用户（others）。</p></li><li><p><code>a</code>：所有用户（all，等同于 <code>u</code>、<code>g</code>、<code>o</code>）。</p><p>2.<strong>操作符</strong>：</p></li><li><p><code>+</code>：添加权限。</p></li><li><p><code>-</code>：去除权限。</p></li><li><p><code>=</code>：设置具体权限。</p></li></ul><p>​    3.<strong>权限类型</strong>：</p><ul><li><p><code>r</code>：读权限。</p></li><li><p><code>w</code>：写权限。</p></li><li><p><code>x</code>：执行权限。</p><h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><ul><li><strong>授予文件所有者读、写、执行权限，去除其他用户的执行权限</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+rwx,o-x file.txt</span><br></pre></td></tr></table></figure><ul><li><strong>为所有用户添加执行权限</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x script.sh</span><br></pre></td></tr></table></figure><ul><li><strong>设置文件拥有者为读写权限，组和其他用户为只读权限</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u=rw,g=r,o=r file.txt</span><br></pre></td></tr></table></figure></li></ul><h4 id="二、数字模式："><a href="#二、数字模式：" class="headerlink" title="二、数字模式："></a>二、数字模式：</h4><ul><li><code>7</code> &#x3D; 4 + 2 + 1 &#x3D; 读、写、执行权限（rwx）</li><li><code>6</code> &#x3D; 4 + 2 &#x3D; 读、写权限（rw-）</li><li><code>5</code> &#x3D; 4 + 1 &#x3D; 读、执行权限（r-x）</li><li><code>4</code> &#x3D; 4 &#x3D; 读权限（r–）</li><li><code>3</code> &#x3D; 2 + 1 &#x3D; 写、执行权限（wx-）</li><li><code>2</code> &#x3D; 2 &#x3D; 写权限（w–）</li><li><code>1</code> &#x3D; 1 &#x3D; 执行权限（x–）</li><li><code>0</code> &#x3D; 0 &#x3D; 没有任何权限（—）</li></ul><p>数字模式中，三位数字分别表示文件拥有者、文件所属组和其他用户的权限。</p><h4 id="示例：-1"><a href="#示例：-1" class="headerlink" title="示例："></a>示例：</h4><ul><li><strong>为文件设置权限：文件拥有者：读、写、执行；文件所属组：读、执行；其他用户：执行</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 751 file.txt</span><br></pre></td></tr></table></figure><ul><li><strong>为文件设置权限：文件拥有者：读、写；文件所属组和其他用户：读权限</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 644 file.txt</span><br></pre></td></tr></table></figure><p>补充：加<code>-R</code> 参数可修改所有子目录权限。</p><h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>使用格式：<code>find &lt;路径&gt; &lt;根据&gt; &lt;条件&gt; &lt;操作&gt;</code></p><h4 id="常见根据与条件："><a href="#常见根据与条件：" class="headerlink" title="常见根据与条件："></a>常见根据与条件：</h4><p>一、<strong>搜索文件名</strong><code>-name</code> </p><ul><li><strong>搜索当前目录下所有名为</strong> <code>example.txt</code> 的文件：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name &quot;example.txt&quot;</span><br></pre></td></tr></table></figure><ul><li><strong>搜索当前目录下所有以</strong> <code>.txt</code> 结尾的文件：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name &quot;*.txt&quot;</span><br></pre></td></tr></table></figure><ul><li><strong>搜索所有以大写字母</strong> <code>A</code> 开头的文件：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name &quot;A*&quot;</span><br></pre></td></tr></table></figure><p>注意：可以用<code>*</code>代表泛指，这在SQL中亦有记载。</p><p>二、<strong>根据文件类型搜索</strong> <code>-type</code> </p><ul><li><p><code>f</code>：普通文件(formal)。</p></li><li><p><code>d</code>：目录(directory)。</p></li><li><p><code>l</code>：符号链接(link)。</p></li><li><p><strong>搜索当前目录下所有的目录</strong>：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type d</span><br></pre></td></tr></table></figure><ul><li><strong>搜索当前目录下所有的普通文件</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f</span><br></pre></td></tr></table></figure><ul><li><strong>搜索当前目录下所有的符号链接</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type l</span><br></pre></td></tr></table></figure><p>三、<strong>根据文件大小搜索</strong> <code>-size</code> </p><ul><li><p><code>c</code>：字节（bytes）。</p></li><li><p><code>k</code>：千字节（KB）。</p></li><li><p><code>M</code>：兆字节（MB）。</p></li><li><p><code>G</code>：千兆字节（GB）。</p></li><li><p><strong>搜索当前目录下大于 100 KB 的文件</strong>：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -size +100k</span><br></pre></td></tr></table></figure><ul><li><strong>搜索当前目录下小于 10 MB 的文件</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -size -10M</span><br></pre></td></tr></table></figure><h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><h4 id="一、压缩"><a href="#一、压缩" class="headerlink" title="一、压缩"></a>一、压缩</h4><p>格式为<code>tar -czf &lt;归档文件名&gt;.tar.gz &lt;文件或目录路径&gt;</code></p><p>解释：</p><ul><li><code>-c</code>：创建归档文件。</li><li><code>-z</code>：使用 <code>gzip</code> 压缩归档文件。</li><li><code>-f</code>：指定归档文件名 。</li></ul><h4 id="二、解压-tar-gz-文件。"><a href="#二、解压-tar-gz-文件。" class="headerlink" title="二、解压 .tar.gz 文件。"></a>二、解压 .tar.gz 文件。</h4><h4 id="格式为tar-xzf-tar-gz"><a href="#格式为tar-xzf-tar-gz" class="headerlink" title="格式为tar -xzf &lt;归档文件名&gt;.tar.gz"></a>格式为<code>tar -xzf &lt;归档文件名&gt;.tar.gz</code></h4><p>解释：</p><ul><li><code>-x</code>：提取文件。</li><li><code>-z</code>：使用 <code>gzip</code> 解压归档文件。</li><li><code>-f</code>：指定要解压的归档文件名。</li></ul><p>好了没了。。。</p>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
